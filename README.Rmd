---
output: github_document
---

<!--

INSTRUCTIONS:

Rendering README
----------------

Render `README.Rmd` regularly, to keep `README.md` up-to-date:

devtools::build_readme()

You could also use GitHub Actions to re-render README.Rmd every time you push.
An example workflow can be found here:
<https://github.com/r-lib/actions/tree/v1/examples>.

You can also embed plots, for example:

#```{r pressure, echo = FALSE}
#plot(pressure)
#```

In that case, commit and push the resulting figure files so they display on
GitHub and CRAN.


Using pkgdown to generate web documentation
-------------------------------------------

Assuming you have installed pkgdown, configure your package (once) to use
pkgdown:
    usethis::use_pkgdown()

Add the address of the website to the url field in the _pkgdown.yml file and
build the site:
    pkgdown::build_site()

Optionally add a reference section to the _pkgdown.yml file and re-compile the
index:
    pkgdown::build_reference_index()

-->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```


# prisonsreadyreckoner

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end -->

**A packaged stock-flow model built in R to estimate the cumulative impact to
prison population of pulling various 'levers' across the whole Criminal Justice
System related to police charge scenarios, court sitting days, average time
served in prison and recall.**

`prisonsreadyreckoner` provides functions for use by the Shiny app,
`prisons-ready-reckoner-app` and is a dependency of that app. It may also be
used for scenario work as a stand-alone package. Inputs for
`prisonsreadyreckoner` are provided by members of the CJS Modelling Team or by
functions in the accompanying internal MoJ package, 
[`prisonsreadyreckonerupdater`](https://github.com/moj-analytical-services/prisonsreadyreckonerupdater).


## Installation

Assuming you are using `renv` for package management, install
`prisonsreadyreckoner` by typing the following in the RStudio console:

```r
renv::install("git@github.com:moj-analytical-services/prisonsreadyreckoner.git@v3.0.0")
```

where `v3.0.0` is the latest release. You may wish to double-check there is not
a more recent release available on Github.

`prisonsreadyreckoner` relies on the `botor` package, which relies on the
`boto3` Python package. To install `boto3`, run the following:

```r
# Tell renv that Python will be used. By default this will point to a default
# Python binary file. Your lock file will be updated with details of the
# Python version used.
renv::use_python()
  
# Install the reticulate library to interface with Python, if not already
installed with # the package itself).
renv::install("reticulate")
  
# Install boto3.
reticulate::py_install("boto3")

```


## Running the model

Assuming you are using `prisonsreadyreckoner` as a stand-alone package, call the
model with

```r
impact <- prisonsreadyreckoner::run_prisonflowcast(params)
```

where `params` is a vector of parameter values conforming with current
[specifications](https://model-redevelopment-website.apps.alpha.mojanalytics.xyz/packages/r/prisonsreadyreckoner/articles/params.html).
This will include various parameters and files embodying a prison population
forecast of interest and a few 'levers' and their impact dates, which represent
departures from the assumptions of the forecast.

The return value will be a tibble providing baseline and scenario prison
population forecasts under, respectively, 'baseline' conditions and with the
'levers' from the `params` list activated. Both populations are split by prison
population cohort and gender.

**The 'baseline' has no intrinsic value.** Instead, assuming files provided in
the `params` list are appropriate, the differences (scenario minus baseline)
between the scenario and baseline volumes represents an estimate of the impact
that lever settings have on the prison population. An adjusted prison population
forecast may be obtained by adding this difference to the relevant prison
population forecast.


## Further reading

For full details, see the accompanying vignette:

```r
remotes::install_git("git@github.com:moj-analytical-services/prisonsreadyreckoner.git@<packageversion>",
                     force = TRUE,
                     build_vignettes = TRUE)
vignette('mojmodel')
```

where `<packageversion>` is the latest package version (e.g. `v3.0.0`).

Also available at
[our website](https://model-redevelopment-website.apps.live.cloud-platform.service.justice.gov.uk/).

[Source code](https://github.com/moj-analytical-services/prisonsreadyreckoner/)
on Github.


