---
title: "Assumptions"
author: "Brian G Burton"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Assumptions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

<!---
```{r setup}
#library(mojmodel)
```
--->


# Introduction{#introduction}

The following provides a summary of the main calculations employed in realising
the effects of each lever. This summary is intended for model developers but may
also be of interest to those wishing to understand our modelling assumptions. A
briefer, more high-level assumptions log is available separately from the CJS
Modelling Team.

# General approach

The ready reckoner does not seek to recreate all the facets of the existing
prison projections used for publication and internal risk management. Instead,
it generates a *baseline*, representing the main ('central') projection from the
most recent projections, and a *scenario*, representing deviations from the
assumptions of the central projection. The output of the main package function
includes both baseline and scenario but it is only their difference that should
be used, superimposed on the central projection, if desired, to illustrate
impacts of marginal changes in population drivers. For some case types and
levers, the baseline is zero under default settings and completely
uninformative.


# Police charge scenarios (Lever 1)

Police charge scenarios are represented by files listed in the
`police_charges_mc_files` and `police_charges_cc_files` parameters. The user
selects a scenario by setting the `lever_police_charges_scenario` parameter
to an appropriate value. See [Parameters][parameters] for a current list. 


## Magistrates' court receipts

The magistrates' court files provide magistrates' court disposals for various
police charge scenarios, expressed as a deviation from the baseline ('central')
scenario.

***ASSUMPTION:** We assume that magistrates' court disposals are without
material delay so that these disposal volumes are synonymous with receipts and
entirely describe the magistrates' court caseload associated with each
scenario.*

Non-central scenarios include summary motoring, summary non-motoring,
triable-either-way and indictable-only cases. The additional caseload associated
with each scenario will partially drive prison inflows, in a way depending on
which scenario is selected (i.e. the value of the police charge scenario lever
as represented by the `lever_police_charges_scenario` parameter).


## Crown Court receipts

As for the magistrates' court equivalents, the Crown Court receipt volumes are
expressed as a deviation from the baseline ('central') scenario.

Rows represent case types that combine receipt type (e.g. appeal, committed for
sentence, indictable only, triable-either-way) with offence group (e.g. drug
offences, fraud offences etc.).

***ASSUMPTION:** To convert receipt volumes to a form suitable for our Crown
Court modelling, each row is mapped to entries in a look-up table specified by
the parameter, `police_charges_cc_route_file`, which provides recent historical
splits of the case type volumes into Crown Court disposal routes (appeal,
committed for sentence and various effective trials, guilty pleas and other
outcomes).*

Upon loading, lags are added to certain Crown Court receipt volumes to represent
the time between receipt and disposal. Lags in months are taken from the file at
the path provided by the `ringfenced_lookup_file` parameter and read into the
`ringfenced_lookup` table.


# Crown Court disposals and sentencing modelling (Lever 2)

The Crown Court is a complex, resource limited system, currently dealing with a
backlog. The modelling underpinning the formal prisons projection models the
way the courts prioritise work and works through queued cases.
`prisonsreadyreckoner` takes a simpler approach, relying heavily on tables
generated by the formal projection modelling.


## Crown Court disposals

Crown Court behaviour is determined by the lever, `lever_extra_cc_sitting_days`,
and three other parameters:

1. `cc_output_file` - Specifies a path to a file containing, for each
month and Crown Court receipt type and disposal route, the number of disposals,
the duration of those disposals and the backlog by the end of the month
generated by the formal projection.

2. `cc_capacity_file` - A path to a file containing monthly sitting days and
average hours sat per sitting day assumed in the formal projection.

3. `ringfenced_lookup_file` - A path to a look-up table identifying each
combination of receipt type and disposal route as either 'ringfenced' or 'non-
ringfenced' as well as lags for each type from receipt to disposal in the
Crown Court.

The respective files are read into tables, `cc_output`, `cc_capacity` and
`ringfenced_lookup`.


***ASSUMPTION:** 'Ringfenced' cases are those case types that are assumed to be
dealt with by the Crown Court in the month they arrive. 'Non-ringfenced' cases
are assumed to join the outstanding caseload (backlog) and be dealt with in a
later month.*

***ASSUMPTION:** Additional ringfenced Crown Court receipts indicated by the
selected police charge scenario are assumed to take up the same time per case as
the ringfenced cases in the `cc_output_file` file.*

***ASSUMPTION:** Additional Crown Court sitting days indicated by
`lever_extra_cc_sitting_days` are assumed to provide the same hours per sitting
day as indicated in the `cc_capacity_file`.*

***ASSUMPTION:** After accounting for hours taken additional ringfenced cases,
any court capacity added by the additional sitting days is distributed among
non-ringfenced disposals according to the relative number of disposals per hour
indicated for non-ringfenced cases in the `cc_output_file` file.*

In other words, at all times we assume that a marginal change in caseload has no
impact on hours per ringfenced disposal, hours per sitting day and the
distribution of non-ringfenced cases disposed per hour of available court time.


To realise these assumptions,

1. `cc_output` is augmented on reading by a) identifying cases as ringfenced
using the `ringfenced_lookup` table and b) adding the 'backlog rate' (monthly
non-ringfenced cases disposed for every hour of non-ringfenced court time) and
the hours taken per disposal (disposal duration / number of disposals);

2. `cc_capacity` is augmented with the total monthly ringfenced disposal hours
and the total monthly ringfenced and non-ringfenced disposal hours
from `cc_output` to record, respectively, baseline ringfenced court time and
baseline capacity;

3. Additional volumes from the selected police charge scenario input are added
to `cc_output` and the additional volume of ringfenced receipts is identified.

4. The total monthly additional hours taken up by ringfenced cases is 
calculated from hours per disposal in `cc_output` and added to `cc_capacity`.

5. `cc_capacity` is joined onto `cc_output` and the difference between
additional hours from sitting days and the additional hours from ringfenced
cases are distributed among the non-ringfenced cases according to the backlog
rate.

6. A warning is issued if baseline plus additional ringfenced court time exceeds
baseline capacity plus additional sitting hours.


The result is a table of additional disposals, both the ringfenced disposals
deriving directly from additional receipts from the police charge scenario and
non-ringfenced disposals afforded by whatever capacity was available after
accounting for ringfenced disposals. 


## Sentencing outcomes

Sentencing relies on a linear regression model constructed with the
[prisonsreadyreckonerupdater](https://github.com/moj-analytical-services/prisonsreadyreckonerupdater)
package. Briefly, historical prison reception volumes by
[sentence length band][sentence-bands], taken from the Fullsample data set, are
regressed against historical data for magistrates' court and Crown Court
disposals. The model generated is then used by `prisonsreadyreckoner` to
forecast determinate sentence prison receptions from forecast magistrates' court
and Crown Court disposals.

***ASSUMPTION:** At the time of writing (August 2023), the predictors of the
regression model are.*

Sentence band 1:
* Effective trial, early guilty plea, late guilty plea and cracked guilty pleas in the Crown Court,
* Cases committed for sentence in the Crown Court
* Summary cases in the magistrates' court and
* Triable-either-way cases in the magistrates' court.

Sentence band 2: Same as for Band 1 but without the summary cases.

Sentence band 3: Same as for Band 2 but without the triable-either-way cases.

Sentence band 4: Same as for Band 3.*

This model avoids relying on predictors that cover the same cases or that are
irrelevant for the sentence band in question. For example, Under the Criminal 
Justice Act 2003 magistrates' have had powers to impose a maximum of 6 monthâ€™s
imprisonment for a summary only offence so summary cases cannot be predictors of
sentence band 2 or above.

See the latest assumptions log for the latest model.


# Remand (Levers 1 and 2)

Remand impacts are non-trivial because many on remand will be released after the
custody time limit if their cases have not yet been disposed. In a simple model,
it is not reasonable to trace the volumes on remand as they pass through the
courts, potentially waiting changeable time as outstanding caseload. Instead, we
model, crudely, the impacts that each receipt or disposal has on remand
population and make simplistic adjustments for custody time limits (CTL).

***ASSUMPTION:** Marginal remand prisoner inflows and outflows are forecast
primarily by applying to court receipts and Crown Court disposals, respectively,
historical ratios of remand inflows to court receipts and remand outflows to
Crown Court disposals. Magistrates' court receipts are taken as a proxy for
court receipts and only indictable-only and triable-either-way receipts are
considered (as summary cases are unlikely to involve remand).*

***ASSUMPTION:** 20% of additional remand _inflows_ are assumed to be held
indefinitely until disposal. The remaining 80% are assumed to be placed in the
court backlog and released after six months.*

***ASSUMPTION:** 20% of additional remand _outflows_ are assumed to have been
held on remand since receipt at court. The remaining 80% are assumed to be drawn
from the wider pool of remand prisoners and would have otherwise left remand,
even without disposal, at varying lags from one to six months.*


These assumptions mean that most (80%) of any marginal change in receipts or
disposals will have only a transient impact on remand population. The transient
impacts are asymmetrical with respect to receipt and disposal because receipts
resulting in remand are imagined to add to outstanding caseload (backlog) and
wait at least six months for a disposal while disposals are imagined to come
from both the backlog and recent arrivals and may release some from remand
within the CTL.

In the model, the transient and long-term impacts of marginal changes in
receipts and disposals are captured in filters constructed at the top of the
`run_prisonsreadyreckoner()` function. These are convolved with marginal
receipts and disposals, respectively, and summed in the
`calculate_pop_remand_delta()` function.


# Prison inflows (Lever 3)

Levers for prison receptions refer to determinate sentence prisoners only.

***ASSUMPTION:** We do not currently model changes in indeterminate inflows.
These are low volume and historically stable.*

***ASSUMPTION:** Determinate sentence prisoners are aggregated to four
[sentence length band][sentence-bands]. In the baseline run, inflows are as in
the central scenario from the latest prison projection, _considering only those
entering prison in the forecast period_. When the prison inflow lever is set to
a non-zero value, additional prison inflows are added to the relevant band.*

The prison population resulting from prison inflows in the baseline is modelled
by *convolving* the inflow time series with filters representing the the
distribution of time served by prisoners within the selected sentence band. This
generates a second time series of prison outflows and the population timeseries
is derived as the cumulative sum of inflows minus outflows.

The same procedure is applied to the model scenario run so that the volumes in
the scenario minus those in the baseline indicate the impact of the lever
setting with respect to the baseline conditions.


# Time served (Lever 4)

When the time served lever is set for a given scenario, the distributions of
time served used to generate prison population are stretched or squeezed
appropriately so that prison outflows are either delayed or brought forward,
respectively. The result is that prison population goes up or down from the
impact date chosen.

***ASSUMPTION:** Changes to the time served lever affect only determinate 
sentence prisoners arriving after the impact date. This includes those in the
baseline as well as the additional inflows resulting from more upstream levers,
such as sitting days or prison inflows.*

That is, we are not retrospectively changing the sentence lengths of offenders
arriving in the historical period or any arriving before the chosen impact date
but are considering all offenders arriving after the impact date.

Stretching and squeezing of baseline time served distributions is performed by
interpolation using an off-the-shelf function. This is a time-consuming
operation so care is taken to trim time series and time served distributions
to the minimum required to cover the forecast period.


# Licence

Licence populations in the baseline and scenario are generated in a similar way
to the prison population. We convolve licence inflows with a profile
representing time on licence to generate a time series of licence outflows. The
population is found as the cumulative difference between inflows and outflows.

Licence inflows are provided by the determinate outflow time series.

***ASSUMPTION:** For reasons to do with differences between prison and probation
book-keeping, licence inflows are pro-rated to match prison outflows with
probation inflows.*

***ASSUMPTION:** To account crudely for post-recall releases, we take licence
profiles from the Prisons Team. These have been calibrated so that licence
population predictions in the historical period match actual licence
population.*

***ASSUMPTION:** Again we model licence and recall only for determinate sentence
prisoners. Indeterminate prisoners will not be released in the time frame of our
simulation.*


# Recall

## Recall inflows (Lever 5)

Recall inflows are based on a simple relationship to licence population:

***ASSUMPTION:** We assume that monthly recall inflows can be approximated as a
fraction of the licence population (appropriately excluding those on post
sentence supervision, who cannot be recalled).*

Recall rates may be levered by the user.

***ASSUMPTION:** Changes to the recall rate lever affect only determinate 
sentence prisoners sentenced in the forecast period who are on licence after
the lever impact date.*


## Time on recall (Lever 6)

Having generated an inflow time series, we convolve recall inflows with a
profile representing time on recall to generate a time series of outflows. The
recall population is found as the cumulative difference between inflows and
outflows.

***ASSUMPTION:** Determinate recall prisoners are assumed to spend a fixed
length of time on recall, which may differ between sentence length bands. The
time assumed for each sentence band as well as an adjustment, calibrated to
optimise population predictions, is provided by the Prisons Team.*

Where the time on recall lever is different from the default, a different
time on recall is applied for those recalled after the impact date. As with the
other levers, only individuals sentenced in the forecast period are affected.

Owing to all the adjustments and the highly simplified treatment of a system
that, in reality, can involve multiple return visits to prison, the recall
parameters are best thought as empirical figures that allow for a reasonable
forecast of recall population driven by licensee population. The fixed time on
recall is crude but fast to compute and apply.

***ASSUMPTION:** We currently make no allowance for the balance between fixed
and standard recall.*



<!-- Cross-vignette references -->
[parameters]: ./parameters.html#parameters "Parameters"
[sentence-bands]: ./sentence-bands.html#sentence-bands "Sentence bands"







