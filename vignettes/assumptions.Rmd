---
title: "Assumptions"
author: "Brian G Burton"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Assumptions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

<!---
```{r setup}
#library(mojmodel)
```
--->


# Introduction{#introduction}

The following provides a summary of the main calculations employed in realising
the efects of each lever. This summary is intended for model developers but may
also be of interest to those wishing to understand our modelling assumptions. A
briefer, more high-level assumptions log is available separately from the CJS
Modelling Team.


# Police charge scenarios (Lever 1)

Police charge scenarios are represented by files listed in the
`police_charges_mc_file` and `police_charges_cc_files` parameters. The user
selects a scenario by setting the `lever_police_charges_scenario` parameter
to an appropriate value. See [Parameters][parameters] for a current list. 


## Magistrates' court receipts

The magistrates' court file provides magistrates' court disposals for each
police charge scenario, including the baseline ('central') scenario.

***ASSUMPTION:** We assume that magistrates' court disposals are without material
delay so that these disposal volumes are synonymous with receipts and entirely
describe the magistrates' court caseload associated with each scenario.*

Non-central scenarios are joined with the central scenario and the monthly
difference for each with respect to the central scenario is
calculated for summary motoring, summary non-motoring, triable-either-way and
indictable-only cases. The result is the additional caseload associated with
each scenario, which will partially drive prison inflows, depending on which
scenario is selected (i.e. the value of the police charge scenario lever as
represented by the `lever_police_charges_scenario` parameter).


## Crown Court receipts

The Crown Court files provide Crown Court receipts for each police charge
scenario, including the baseline.

Rows represent case types that combine receipt type (e.g. appeal, committed for
sentence, indictable only, triable-either-way) with offence group (e.g. drug
offences, fraud offences etc.).

***ASSUMPTION:** To convert receipt volumes to a form suitable for our Crown
Court modelling, each row is mapped to entries in a look-up table specified by
the parameter, `police_charges_cc_route_file`, which provides recent historical
splits of the case type volumes into Crown Court disposal routes (appeal,
committed for sentence and various effective trials, guilty pleas and other
outcomes).*

Crown receipt volumes for non-central scenarios represent the central scenario
volume minus the volume expected under the respective scenarios. Additional
caseload associated with each scenario is simply minus the volume provided. No
further reference to the central scenario required.


# Crown Court disposals and sentencing modelling (Lever 2)

The Crown Court is a complex, resource limited system, currently dealing with a
backlog. The modelling underpinning the formal prisons projection models the
way the courts prioritise work and works through queued cases.
`prisonsreadyreckoner` takes a simpler approach, relying heavily on tables
generated by the formal projection modelling.


## Crown Court disposals

Crown Court behaviour is determined by the lever, `lever_extra_cc_sitting_days`,
and three other parameters:

1. `cc_output_file` - Specifies a path to a file containing, for each
month and Crown Court receipt type and disposal route, the number of disposals,
the duration of those disposals and the backlog by the end of the month
generated by the formal projection.

2. `cc_capacity_file` - A path to a file containing monthly sitting days and
average hours sat per sitting day assumed in the formal projection.

3. `ringfenced_lookup_file` - A path to a look-up table identifying each
combination of receipt type and disposal route as either 'ringfenced' or 'non-
ringfenced'.

The respective files are read into tables, `cc_output`, `cc_capacity` and
`ringfenced_lookup`.


***ASSUMPTION:** 'Ringfenced' cases are those case types that are assumed to be
dealt with by the Crown Court in the month they arrive. 'Non-ringfenced' cases
are assumed to join the outstanding caseload (backlog) and be dealt with in a
later month.*

***ASSUMPTION:** Additional ringfenced Crown Court receipts indicated by the
selected police charge scenario are assumed to take up the same time per case as
the ringfenced cases in the `cc_output_file` file.*

***ASSUMPTION:** Additional Crown Court sitting days indicated by
`lever_extra_cc_sitting_days` are assumed to provide the same hours per sitting
day as indicated in the `cc_capacity_file`.*

***ASSUMPTION:** After accounting for hours taken additional ringfenced cases,
any court capacity added by the additional sitting days is distributed among
non-ringfenced disposals according to the relative number of disposals per hour
indicated for non-ringfenced cases in the `cc_output_file` file.*

In other words, at all times we assume that a marginal change in caseload has no
impact on hours per ringfenced disposal, hours per sitting day and the
distribution of non-ringfenced cases disposed per hour of available court time.


To realise these assumptions,

1. `cc_output` is augmented on reading by a) identifying cases as ringfenced
using the `ringfenced_lookup` table and b) adding the 'backlog rate' (monthly
non-ringfenced cases disposed for every hour of non-ringfenced court time) and
the hours taken per disposal (disposal duration / number of disposals);

2. `cc_capacity` is augmented with the total monthly ringfenced disposal hours
and the total monthly ringfenced and non-ringfenced disposal hours
from `cc_output` to record, respectively, baseline ringfenced court time and
baseline capacity;

3. Additional volumes from the selected police charge scenario input are added
to `cc_output` and the additional volume of ringfenced receipts is identified.

4. The total monthly additional hours taken up by ringfenced cases is 
calculated from hours per disposal in `cc_output` and added to `cc_capacity`.

5. `cc_capacity` is joined onto `cc_output` and the difference between
additional hours from sitting days and the additional hours from ringfenced
cases are distributed among the non-ringfenced cases according to the backlog
rate.

6. A warning is issed if baseline plus additional ringfenced court time exceeds
baseline capacity plus additional sitting hours.


The result is a table of additional disposals, both the ringfenced disposals
deriving directly from additional receipts from the police charge scenario and
non-ringfenced disposals afforded by whatever capacity was available after
accounting for ringfenced disposals. 


## Sentencing outcomes

Sentencing relies on a linear regression model constructed with the
[prisonsreadyreckonerupdater](https://github.com/moj-analytical-services/prisonsreadyreckonerupdater)
package. Briefly, historical prison reception volumes by
[sentence band][sentence-bands], taken from the Fullsample data set, are
regressed against historical data for magistrates' court and Crown Court
disposals. The model generated is then used by `prisonsreadyreckoner` to
forecast determinate sentence prison receptions from forecast magistrates' court
and Crown Court disposals.

***ASSUMPTION:** At the time of writing (August 2023), the predictors of the
regression model are.

Sentence band 1:
* Effective trial, early guilty plea, late guilty plea and cracked guilty pleas in the Crown Court,
* Cases committed for sentence in the Crown Court
* Summary cases in the magistrates' court and
* Triable-either-way cases in the magistrates' court.

Sentence band 2: Same as for Band 1 but without the summary cases.

Sentence band 3: Same as for Band 2 but without the triable-either-way cases.

Sentence band 4: Same as for Band 3.*

This model avoids relying on predictors that cover the same cases or that are
irrelevant for the sentence band in question. For example, Under the Criminal 
Justice Act 2003 magistrates' have had powers to impose a maximum of 6 monthâ€™s
imprisonment for a summary only offence so summary cases cannot be predictors of
sentence band 2 or above.

See the latest assumptions log for the latest model.


# Remand (Levers 1 and 2)

Remand impacts are non-trivial because many on remand will be released after the
custody time limit if their cases have not yet been disposed. In a simple model,
it is not reasonable to trace the volumes on remand as they pass through the
courts, potentially waiting changeable time as outstanding caseload. Instead, we
model, crudely, the impacts that each receipt or disposal has on remand
population and make simplistic adjustments for custody time limits (CTL).

***ASSUMPTION: Marginal remand prisoner inflows and outflows are forecast
primarily by applying to court receipts and Crown Court disposals, respectively,
historical ratios of remand inflows to court receipts and remand outflows to
Crown Court disposals. Magistrates' court receipts are taken as a proxy for
court receipts and only indictable-only and triable-either-way receipts are
considered (as summary cases are unlikely to involve remand).*

***ASSUMPTION: 20% of additional remand _inflows_ are assumed to be held
indefinitely until disposal. The remaining 80% are assumed to be placed in the
court backlog and released after six months.*

***ASSUMPTION: 20% of additional remand _outflows_ are assumed to have been held
on remand since receipt at court. The remaining 80% are assumed to be drawn from
the wider pool of remand prisoners and would have otherwise left remand, even
without disposal, at varying lags from one to six months.*


These assumptions mean that most (80%) of any marginal change in receipts or
disposals will have only a transient impact on remand population. The transient
impacts are asymmetrical with respect to receipt and disposal because receipts
resulting in remand are imagined to add to outstanding caseload (backlog) and
wait at least six months for a disposal while disposals are imagined to come
from both the backlog and recent arrivals and may release some from remand
within the CTL.

In the model, the transient and long-term impacts of marginal changes in
receipts and disposals are captured in filters constructed at the top of the
`run_prisonsreadyreckoner()` function. These are convolved with marginal
receipts and disposals, respectively, and summed in the
`calculate_pop_remand_delta()` function.


# Prison inflows (Lever 3)




<!-- Cross-vignette references -->
[parameters]: ./parameters.html#parameters "Parameters"
[sentence-bands]: ./sentence-bands.html#sentence-bands "Sentence bands"







